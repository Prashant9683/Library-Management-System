{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LMS</title>
    

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">


    <link rel="stylesheet" href="{% static 'style.css' %}">
    <script src="{% static 'script.js' %}"></script>
    <script src="https://kit.fontawesome.com/1b5555827c.js" crossorigin="anonymous"></script>

</head>
<body>

<header class="header">

    <a href="#" class="logo"> <i class="fa-solid fa-book"></i> LMS </a>

    <nav class="navbar">
        <a href="http://127.0.0.1:8000">home</a>
        <a href="http://127.0.0.1:8000/add_new_book">add books</a>
        <a href="http://127.0.0.1:8000/view_books">book</a>
        <a href="http://127.0.0.1:8000/add_new_student">add students</a>
        <a href="http://127.0.0.1:8000/show_students">student</a>
        <a href="http://127.0.0.1:8000/view_books_issued">book issued</a>
        <a href="http://127.0.0.1:8000/view_books_issued">book issued</a>
    </nav>

    <div id="menu-btn" class="fas fa-bars"></div>

</header>

<section class="home" id="home">

    <div class="content">
        <h3>Welcome to Library Management Portal - Amrita</h3>
        <p>Good books don't giveup all their secrets at once.</p>
    </div>

</section>


<section class="icons-container">

    <div class="icons">
        <i class="fa-solid fa-book-open"></i>
        <h3>140+</h3>
        <p>Books are available.</p>
    </div>

    <div class="icons">
        <i class="fas fa-users"></i>
        <h3>1040+</h3>
        <p>Students Enrolled.</p>
    </div>

    <div class="icons">
        <i class="fa-solid fa-wifi"></i>
        <p>Wifi available.</p>
    </div>

</section>


<section class="doctors" id="doctors">

    <h1 class="heading"> <span>Staff</span> </h1>

    <div class="box-container">

        <div class="box">
            <img src="{% static "image/Prashant.png" %}" alt="">
            <h3>Prashant Gehlot</h3>
            <span>S3 Student</span>
            <div class="share">
                <a href="#" class="fab fa-facebook-f"></a>
                <a href="#" class="fab fa-twitter"></a>
                <a href="#" class="fab fa-instagram"></a>
                <a href="#" class="fab fa-linkedin"></a>
            </div>
        </div>

        <div class="box">
            <img src="{% static "image/Gaurav.png" %}" alt="">
            <h3>Gaurav Sharma</h3>
            <span>S3 Student</span>
            <div class="share">
                <a href="#" class="fab fa-facebook-f"></a>
                <a href="#" class="fab fa-twitter"></a>
                <a href="#" class="fab fa-instagram"></a>
                <a href="#" class="fab fa-linkedin"></a>
            </div>
        </div>

        <div class="box">
            <img src="{% static "image/Saumy.png" %}" alt="">
            <h3>Saumy Shukla</h3>
            <span>S3 Student</span>
            <div class="share">
                <a href="#" class="fab fa-facebook-f"></a>
                <a href="#" class="fab fa-twitter"></a>
                <a href="#" class="fab fa-instagram"></a>
                <a href="#" class="fab fa-linkedin"></a>
            </div>
        </div>

        <div class="box">
            <img src="{% static "image/Yash.png" %}" alt="">
            <h3>Yash Katyan</h3>
            <span>S3 Student</span>
            <div class="share">
                <a href="#" class="fab fa-facebook-f"></a>
                <a href="#" class="fab fa-twitter"></a>
                <a href="#" class="fab fa-instagram"></a>
                <a href="#" class="fab fa-linkedin"></a>
            </div>
        </div>

        <div class="box">
            <img src="{% static "image/Satrudhan.jpg" %}" alt="">
            <h3>Satrudhan Kumar Chauhan</h3>
            <span>S3 Student</span>
            <div class="share">
                <a href="#" class="fab fa-facebook-f"></a>
                <a href="#" class="fab fa-twitter"></a>
                <a href="#" class="fab fa-instagram"></a>
                <a href="#" class="fab fa-linkedin"></a>
            </div>
        </div>



</section>


<section class="book" id="book">

    <h1 class="heading"> <span>Request</span> Book </h1>    

    <div class="row">

        <form method="POST" action="add_book_issue" class="form-inline">
            {% csrf_token %}
            <label>Student Details(Name)</label><br>
            <div id="student_selection">
                <div>{{form.student}}</div>
                    <div><input type="text" placeholder="Quick Student Search" id="quick" onkeyup="Quick_search()">
                        <div id="quick_student_search_view"></div>
                    </div>
            </div>
        
            <br>
            <hr>
            <div class="book_selection">
                <label>Book Details(Name/UUID)</label>
                <br>
                <div><input type="text" placeholder="Quick Book Search" id="quick_book_search" onkeyup="Quick_book_search()">
                    <div id="quick_book_search_view"></div>
                </div>
                <select name="book_instance" required id="id_book_instance" class="selectionbookstudents">
                    <option value="" selected>Choose Books...</option>
                    {%for i in book%}
                        <option class="selection" value="{{i.id}}">{{i.book.book_title}} (: {{i.id}})</option>
                    {%endfor%}
                </select>
            </div>
        <hr>
            <label>Remarks</label><br> <div> {{form.remarks_on_issue}}</div>
            <br> 
            <button type="submit" class="btn btn-success">Issue Book</button>
        
        </form>
    </div>

</section>

<section class="footer">

    <div class="box-container">

        <div class="box">
            <h3>Book Categories</h3>
            <a href="#"> <i class="fas fa-chevron-right"></i> Educational </a>
            <a href="#"> <i class="fas fa-chevron-right"></i> Fiction </a>
            <a href="#"> <i class="fas fa-chevron-right"></i> Literature </a>
            <a href="#"> <i class="fas fa-chevron-right"></i> Autobiography </a>
        </div>

        <div class="box">
            <h3>contact info</h3>
            <a href="#"> <i class="fas fa-phone"></i> +91 9876543210 </a>
            <a href="#"> <i class="fas fa-envelope"></i> example@abc.com </a>
            <a href="#"> <i class="fas fa-map-marker-alt"></i> Amrita School of engineering, Amritapuri </a>
        </div>

        <div class="box">
            <h3>follow us</h3>
            <a href="#"> <i class="fab fa-facebook-f"></i> facebook </a>
            <a href="#"> <i class="fab fa-twitter"></i> twitter </a>
            <a href="#"> <i class="fab fa-instagram"></i> instagram </a>
            <a href="#"> <i class="fab fa-linkedin"></i> linkedin </a>
        </div>

    </div>

</section>

<script type="text/javascript">
    function Quick_search(){
        var input, items,view;
        input = document.getElementById('quick').value.toLowerCase();
        items = document.getElementById('id_student');
        view=document.getElementById("quick_student_search_view");
        view.replaceChildren("");

        for(i=1;i<items.children.length.valueOf();i++){
            var item=items.children[i].innerHTML;
            if(input !== "" && (item.toLowerCase().indexOf(input)>-1 )){
                    var list_added = document.createElement("label");
                    list_added.appendChild(document.createTextNode(item));
                    list_added.onclick =function(){
                        items.children[get_clicked_value(this.innerHTML)].setAttribute("selected",true);
                        view.style.display="none";
                        // uncomment below line to hide the search input after selection is made
                        // document.getElementById('quick').style.display="none";
                    };
                    view.appendChild(list_added);
                    view.style.display="block";
            }
            else{
                view.style.display="none";
            }
        }
    }
    function get_clicked_value(clicked){
        var items = document.getElementById('id_student');
        for(i=1;i<items.children.length.valueOf();i++){
            var item=items.children[i];
                if (item.innerHTML == clicked ) {
                    return item.getAttribute("value");
                }
        }
    }

    // Quick book search
    function Quick_book_search(){
        var input, items,view;
        input = document.getElementById('quick_book_search');
        items = document.getElementById('id_book_instance');
        view=document.getElementById("quick_book_search_view");
        view.replaceChildren("");

        for(i=1;i<items.children.length.valueOf();i++){
            var item=items.children[i].innerHTML;
            if((input.value.toLowerCase() !== "") && (item.toLowerCase().indexOf(input.value.toLowerCase())>-1 ) ){
                var list_added = document.createElement("label");
                list_added.appendChild(document.createTextNode(item));
                list_added.onclick =function(){
                    select_clicked_book(this.innerHTML);
                    view.style.display="none";
                    // comment below line to unhide the search input after selection is made
                    input.style.display="none"; input.value="";
                };
                view.appendChild(list_added);
                view.style.display="block";
            }
            else{
                view.style.display="none";
            }
        }
    }
    function select_clicked_book(clicked){
        var books = document.getElementById('id_book_instance');   
        for(i=1;i<books.children.length.valueOf();i++){
            var item=books.children[i];
                if (item.innerHTML == clicked ) {
                    item.setAttribute("selected",true);
                }
        }
    }
</script>


</body>
</html>